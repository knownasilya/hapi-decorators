<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="assets/style.css?t=90051322">
    <script src="assets/script.js?t=93f1a66c"></script>
    <title>hapi-decorators</title>
    <meta name="viewport" content="width=device-width">
  </head>
  <body class="-menu-visible">
    <div class="doc-layout">
      <div class="toggle menu-toggle js-menu-toggle"></div>
      <div class="menu toc-menu">
        <ul>
          <li class="menu-item -level-0 -parent">
            <ul class="submenu">
              <li class="menu-item -level-1"><a class="link title -active link-index" href="index.html">hapi-decorators</a>
              </li>
              <li class="menu-item -level-1 -parent"><a class="link title link-usage" href="#usage">Usage</a>
                <ul class="submenu">
                  <li class="menu-item -level-2"><a class="link title link-setup-babel" href="#setup-babel">Setup Babel</a>
                  </li>
                </ul>
              </li>
              <li class="menu-item -level-1 -parent"><a class="link title link-decorators" href="#decorators">Decorators</a>
                <ul class="submenu">
                  <li class="menu-item -level-2"><a class="link title link-@controller(basepath)" href="#@controller(basepath)">`@controller(basePath)`</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title link-@route(method-path)" href="#@route(method-path)">`@route(method, path)`</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title link-@options(options)" href="#@options(options)">`@options(options)`</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title link-@validate(validateconfig)" href="#@validate(validateconfig)">`@validate(validateConfig)`</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title link-@cache(cacheconfig)" href="#@cache(cacheconfig)">`@cache(cacheConfig)`</a>
                  </li>
                  <li class="menu-item -level-2"><a class="link title link-@pre(prearray)" href="#@pre(prearray)">`@pre(preArray)`</a>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </div>
      <div class="body page-index">
        <div class="header-nav">
          <div class="right"><a class="iconlink" href="https://github.com/knownasilya/hapi-decorators" data-title="knownasilya/hapi-decorators">
              <!-- span.title Open in GitHub--><span class="icon -github"></span></a>
          </div>
        </div>
        <div class="markdown-body"><h1 id="hapi-decorators">hapi-decorators</h1>
<p>Decorators for HapiJS routes.
Heavily inspired and borrowed from <a href="https://github.com/stewartml/express-decorators">https://github.com/stewartml/express-decorators</a></p>
<p>Great to mix with <a href="https://github.com/jayphelps/core-decorators.js">https://github.com/jayphelps/core-decorators.js</a></p>
<p><a href="http://badge.fury.io/js/hapi-decorators"><img src="https://badge.fury.io/js/hapi-decorators.svg" alt="npm version"></a>
<a href="https://travis-ci.org/knownasilya/hapi-decorators"><img src="https://travis-ci.org/knownasilya/hapi-decorators.svg" alt="Build Status"></a>
<a href="https://coveralls.io/github/knownasilya/hapi-decorators?branch=master"><img src="https://coveralls.io/repos/knownasilya/hapi-decorators/badge.svg?branch=master&amp;service=github" alt="Coverage Status"></a></p>
<h2 id="usage">Usage</h2>
<p>Prerequisits:</p>
<ul>
<li>Hapi 18.4+ (Use 1.x for Hapi 17)</li>
<li>Node 8+ (Use 1.x for Node 6)</li>
</ul>
<pre><code class="lang-sh">npm install --save hapi-decorators
</code></pre>
<pre><code class="lang-js"><span class="pl-k">import</span> {
  <span class="pl-k">get</span>,
  controller
} from &apos;hapi-decorators&apos;
import Hapi from &apos;@hapi/hapi&apos;

const server = new Hapi.Server()

server.connection({
  <span class="hljs-attr">host</span>: <span class="pl-s">&apos;localhost&apos;</span>,
  <span class="hljs-attr">port</span>: <span class="hljs-number">3000</span>
})

<span class="pl-c">// Define your endpoint controller</span>
@controller(<span class="pl-s">&apos;/hello&apos;</span>)
<span class="hljs-class"><span class="pl-k">class</span> <span class="pl-ent">TestController</span> </span>{
  <span class="pl-k">constructor</span>(target) {
    <span class="pl-k">this</span>.target = target
  }

  @<span class="pl-k">get</span>(&apos;/world&apos;)
  sayHello(request, reply) {
    reply({ <span class="hljs-attr">message</span>: <span class="pl-s">`hello, <span class="hljs-subst">${<span class="pl-k">this</span>.target}</span>`</span> })
  }
}

<span class="pl-c">// InitializeController</span>
<span class="pl-k">let</span> test = <span class="pl-k">new</span> TestController(<span class="pl-s">&apos;world&apos;</span>)

<span class="pl-c">// Add Test Controller routes to server</span>
server.route(test.routes())

<span class="pl-c">// Start the server</span>
server.start(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="pl-k">if</span> (err) <span class="pl-k">throw</span> err
  <span class="pl-c1">console</span>.log(<span class="pl-s">`Server running at: <span class="hljs-subst">${server.info.uri}</span>`</span>)
})
</code></pre>
<h3 id="setup-babel">Setup Babel</h3>
<p>Run the above script with the following command, after installing <a href="https://www.npmjs.com/package/babel">babel</a>.</p>
<pre><code class="lang-no-highlight">babel-node --optional es7.decorators,es7.objectRestSpread index.js
</code></pre>
<p>Note: Decorators are currently unsupported in Babel 6. To work around that <a href="https://phabricator.babeljs.io/T2645">issue</a>
use the <a href="https://www.npmjs.com/package/babel-plugin-transform-decorators-legacy">transform-decorators-legacy</a> plugin. See this <a href="http://technologyadvice.github.io/es7-decorators-babel6">post</a> for detailed instructions.</p>
<h2 id="decorators">Decorators</h2>
<h3 id="@controller(basepath)"><code>@controller(basePath)</code></h3>
<p><strong>REQUIRED</strong> This decorator is required at the class level, since it processes the other decorators, and adds
the <code>instance.routes()</code> function, which returns the routes that can be used with Hapi, e.g. <code>server.routes(users.routes())</code>.</p>
<h3 id="@route(method-path)"><code>@route(method, path)</code></h3>
<p>This decorator should be attached to a method of a class, e.g.</p>
<pre><code class="lang-js">@controller(<span class="pl-s">&apos;/users&apos;</span>)
<span class="hljs-class"><span class="pl-k">class</span> <span class="pl-ent">Users</span> </span>{
  @route(<span class="pl-s">&apos;post&apos;</span>, <span class="pl-s">&apos;/&apos;</span>)
  newUser(request, reply) {
    reply([])
  }
}
</code></pre>
<p><strong>Helper Decorators</strong></p>
<ul>
<li><code>@get(path)</code></li>
<li><code>@post(path)</code></li>
<li><code>@put(path)</code></li>
<li><code>@patch(path)</code></li>
<li><code>@delete(path)</code></li>
<li><code>@del(path)</code></li>
<li><code>@all(path)</code></li>
</ul>
<p>These are shortcuts for <code>@route(method, path)</code> where <code>@get(&apos;/revoke&apos;)</code> would be <code>@route(&apos;get&apos;, &apos;/revoke&apos;)</code>.</p>
<h3 id="@options(options)"><code>@options(options)</code></h3>
<p>Overall options setting if none of the other decorators are sufficient.</p>
<h3 id="@validate(validateconfig)"><code>@validate(validateConfig)</code></h3>
<p>Add a validation object for the different types, except for the response.
<code>config</code> is an object, with keys for the different types, e.g. <code>payload</code>.</p>
<h3 id="@cache(cacheconfig)"><code>@cache(cacheConfig)</code></h3>
<p>Cache settings for the route config object.</p>
<h3 id="@pre(prearray)"><code>@pre(preArray)</code></h3>
<p>Set prerequisite middleware array for a given route.
Expects an array, but if passed something else, it will put it into the pre array.</p>

        </div>
      </div>
    </div>
  </body>
</html>